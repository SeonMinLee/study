# Prototype Pattern
Something 인스턴스를 작성할 때는`new Something()` 이라는 식을 이용한다. new 라는 Java 언어 키워드를 사용해서 클래스  
이름을 지정해서 인스턴스를 생성한다. 이와 같이 new로 인스턴스를 만들 경우에는 클래스 이름을 반드시 지정해야 한다.  
그러나 클래스 이름을 지정하지 않고 인스턴스를 생성할 때도 있다. 다음과 같은 경우는 클래스로부터 인스턴스를 만드는 것이  
아니라 인스턴스를 통해서 새로운 인스턴스를 만든다.  
  
- 종류가 너무 많아 클래스로 정리되지 않는 경우
    - 첫 번째는 취급하는 오브젝트의 종류가 너무 많아서 각각을 별도의 클래스로 만들어 다수의 소스파일을 작성해야 하는 경우 
- 클래스로부터 인스턴스 생성이 어려운 경우
    - 두 번째는 생성하고 싶은 인스턴스가 복잡한 작업을 거쳐 만들어지기 때문에 클래스로부터 만들기가 매우 어려운 경우  
      예를 들어 그래픽 에디더 등에서 사용자가 마우스를 조작해서 만든 도형을 나타내는 인스턴스가 있다라고 가정  
      사용자의 조작으로 생성되는 인스턴스를 프로그래밍해서 만드는것은 곤란하다. 사용자의 조작으로 만들어진 인스턴스를  
      다시 만들고 싶을 경우에는 지금 만든 인스턴스를 일단 저장해 두고 만들고 싶은 경우에 그것을 복사한다.
- framework와 생성할 인스턴스를 분리하고 싶은 경우
    - 세 번째는 인스턴스를 생성할 때의 framework를 특정 클래스에 의존하지 않도록 만들고 싶은 경우이다.  
      이와 같은 경우에는 클래스 이름을 지정해서 인스턴스를 만드는 것이 아니라 이미 '모형'이 되는 인스턴스를 등록해 두고  
      그 등록된 인스턴스를 복사해서 인스턴스를 생성한다.
      
인스턴스로부터 다른 인스턴스를 만드는 것은 복사기를 사용해서 서류를 복사하는 일과 비슷하다.  
원래의 서류를 어떻게 만들었는지 몰라도 복사기로 같은 종류의 서류를 몇 장 이라도 만들 수 있다.  
  
Prototype은 '원형'이나 '모범'이라는 의미이다. 원형이 되는 인스턴스, 모범이 되는 인스턴스를 기초로 새로운 인스턴스를  
만드는 것. Java 언어에서는 복제를 하는 조작을 'clone'이라고 부른다.  
이번 패턴학습에서는 자바의 clone 메소드와 cloneable 인터페이스를 살펴본다.  
  
[코드 예제](../src/main/java/prototype/Main.java)  
  
## Prototype 패턴의 등장인물
Prototype 패턴의 등장인물은 다음과 같다.

#### Prototype(원형)의 역할
Prototype은 인스턴스를 복사하여 새로운 인스턴스를 만들기 위한 메소드를 결정한다.    
  
#### ConcretePrototype(구체적인 원형)의 역할
ConcreteProtoType은 인스턴스를 복사해서 새로운 인스턴스를 만드는 메소드를 실제로 구현한다.  
  
#### Client(이용자)의 역할
Client는 인스턴스를 복사하는 메소드를 이용해서 새로운 인스턴스를 만든다.

## 힌트
### 클래스에서 인스턴스를 만들면 안되는 것일까??
Prototype 패턴을 배우고 나서 처음 느낀점은 인스턴스를 만들고 싶으면 new Something() 하면 되지  
"왜 Prototype 패턴이 필요할까? 하는 것이 였다. 
  
그 대답에 대해 정리한 내용  
#### 1. 종류가 너무 많아서 클래스로 정리할 수 없는 경우
예제 코드에서는 3개의 모형뿐이지만 마음먹기에 따라 많은 종류의 모형을 만들 수 있다.  
그러나 이것을 모두 각각의 클래스로 만들면 클래스의 수가 너무 많아지기 때문에 소스프로그램을 관리하기 힘들다.  
  
#### 2. 클래스로부터 인스턴스 생성이 어려운 경우
마우스를 사용해서 도형 에디터와 같은 어플리케이션을 상상해보자. 사용자가 조작을 해서 만든 도형을 나타내는 인스턴스와  
같은 것을 만들고 싶다고 가정할때, 클래스를 사용하지 않고 인스턴스를 복사하는 방법이 낫다.  
  
#### 3. Framework와 생성하는 인스턴스를 분리하고 싶은 경우
예제 코드에서는 인스턴스의 복사(clone)를 실행하는 부분을 framework 패키지 안에 설정하고 있다.  
Manager 클래스의 create 메소드에는 클래스 이름 대신에 'string message'나 'slash box'라는 문자열을 인스턴스 생성을  
위한 이름으로 제공하고 있다. 이것은 Java 언어가 구비하고 있는 인스턴스 생성기구인 new Something() 이라는 형식을  
보다 넓게 이용해서 클래스 이름의 속박으로부터 framework를 분리할 수 있다. 

### 클래스 이름은 속박인가?  
그런데 소스 프로그램 내부에 클래스 이름이 쓰여있으면 무엇이 문제일까?  
소스 코드 내부넹 이용하는 클래스 이름을 쓰는게 당연한건 아닐까?  
여기서 우리는 객체지향 프로그래밍의 목표 중 하나가 '부품으로서 재이용'이라는 점을 다시 상기할 필요가 있다.  
  
소스의 내부에 이용할 클래스의 이름을 쓰는 것이 항상 나쁜 것만은 아니지만 소스 내부에 이용할 클래스의 이름이 쓰여있으면  
그 클래스와 분리해서 재이용할 수 없게 된다.  
  
긴밀하게 결합해야 하는 클래스 이름이 소스안에 사용되는것은 당연하고 문제가 없지만,  
부품으로서 독립시켜야 하는 클래스 이름이 소스안에 사용되는 것은 문제가 될 수 있다.  
  
### 관련 패턴
#### Flyweight 패턴
프로토타입 패턴에서는 현재의 인스턴스와 같은 상태의 별도의 인스턴스를 만들어 이용하지만  
Flywight 패턴에서는 하나의 인스턴스를 복수의 장소에서 공유해서 이용한다.  
  
#### Memento 패턴
Prototype 패턴에서는 현재의 인스턴스와 같은 상태의 별도의 인스턴스를 만든다.  
Memento 패턴에서는 스냅샷과 undo를 실행하기 위해 현재의 인스턴스 상태를 저장한다.  
  
#### Composite 패턴 및 Decorator 패턴
composite 패턴이나 Decorator 패턴을 많이 이용하면 복잡한 구조의 인스턴스가 동적으로 만들어지는 경우가 있다.  
이와 같은 경우 Prototype 을 사용하면 편리하다.  
  
#### Command 패턴
Command 패턴에 등장하는 명령을 복제하고 싶은 경우에는 Prototype 패턴을 사용한다.


